{"mappings":"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","sources":["src/customFunction/fetchFilmsTrends.js","src/customFunction/functionCleanRender.js","src/customFunction/getGenreName.js","src/customFunction/trendfilmsMarkup.js","src/customFunction/filmsTrendRender.js","src/customFunction/pagination.js","src/index.js","src/customFunction/fetchGenreId.js"],"sourcesContent":["//import {displayPagination}//!!!!\n\nconst BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function buildUrl(pageNumber, mediaType, time_window) {\n  const key = '894ef72300682f1db325dae2afe3e7e2';\n  const baseUrl = `https://api.themoviedb.org/3/trending/`;\n  // const mediaType = `movie`;\n  // const time_window = `day`;\n  console.log(mediaType);\n  return `${baseUrl}${mediaType}/${time_window}?api_key=${key}&page=${pageNumber}`;\n}\n\nexport function fetchFilmsTrends(page, urlPart) {\n  return fetch(`${BASEURL}${urlPart}?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\nexport function fetchFilms(page, mediaType, time_window) {\n  return fetch(buildUrl(page, mediaType, time_window)).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n//https://api.themoviedb.org/3/trending/movie/week?api_key=894ef72300682f1db325dae2afe3e7e2&page=2\n//export default async function\n//const response = await axios.get(\n","export function cleanRender(element) {\n  element.innerHTML = '';\n}\n","// import { genreIdArr } from '../controls/trendsControl';\nimport { genreIdArr } from '../../src/index';\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  // if (genreName.length > 2) {\n  //   genreName = genreName.slice(0, 2);\n  //   genreName.push('Other');\n  // }\n  return genreName;\n}\n","import { getGenreName } from './getGenreName';\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path }) => {\n      let genres = getGenreName(genre_ids);\n\n      if (genres.length > 2) {\n        genres = genres.slice(0, 2);\n        genres.push('Other');\n      }\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n","import { createFilmMarkup } from './trendfilmsMarkup';\n\nexport function filmsTrendRender(data, destinationEl) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  destinationEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n","import { paginationBtnHidden } from './paginationBtnHidden';\nimport { cleanRender } from './functionCleanRender';\nimport { refs } from '../../src/index';\nimport { fetchFilmsTrends } from './fetchFilmsTrends';\nimport { urlPart } from '../../src/index';\nimport { filmsTrendRender } from './filmsTrendRender';\nimport { buildUrl } from './fetchFilmsTrends';\n//import { page } from '../../src/index';\n\nexport function paginationRender(\n  totalPages,\n  currentPage,\n  mediaType,\n  time_window\n) {\n  //console.log(arrFilms);\n  //   refs.incrementBtnEl.addEventListener('click', onIncrDecrBtnElClick);\n  //   refs.decrementBtnEl.addEventListener('click', onIncrDecrBtnElClick);\n  //refs.paginationWrapEl.innerHTML = '<ul class=\"pagination__list list\"></ul>';\n  //paginationListEl = document.querySelector('.pagination__list');\n  //paginationListEl.addEventListener('click', onPaginationLiElClick);\n  let paginationArrBtn = [];\n  let paginationArrAtr = [];\n  let paginationLinks = '';\n\n  //   for (let i = 1; i <= 9; i++) {\n  //     const classEl = `item${i}`;\n  // const liEl = document.createElement('li');\n  // liEl.classList.add('pagination__item');\n  // liEl.classList.add(classEl);\n  // liEl.innerText = page;\n\n  // paginationListEl.appendChild(liEl);\n  // if (currentPage === i) {\n  //   liEl.classList.add('pagination__item--active');\n  // }\n  //   }\n  //   paginationListEl.firstChild.textContent = '1';\n\n  //   paginationListEl.lastChild.textContent = totalPage;\n  // ----- 1 Ver\n  if (currentPage <= 6) {\n    for (let i = 1; i <= 7; i++) {\n      //const pageClass = `.item${i}`;\n      //   paginationListEl.querySelector(pageClass).textContent = i;\n      paginationArrBtn.push(i);\n      paginationArrAtr.push(i);\n    }\n    paginationArrBtn.push('...');\n    paginationArrAtr.push(8);\n    paginationArrBtn.push(totalPages);\n    paginationArrAtr.push(totalPages);\n    // paginationListEl.querySelector('.item8').textContent = '...';\n    // paginationBtnHidden(page, paginationListEl, totalPage);\n  }\n  // --- 2 Ver\n  if (currentPage > 6 && currentPage < totalPages - 5) {\n    paginationArrBtn.push(1);\n    paginationArrAtr.push(1);\n    paginationArrBtn.push('...');\n    paginationArrAtr.push(currentPage - 3);\n    for (let i = currentPage - 2; i <= currentPage + 2; i++) {\n      paginationArrBtn.push(i);\n      paginationArrAtr.push(i);\n      //   newBtnNumber = Number(currentPage) + i;\n      //   liClass = `.item${i + 5}`;\n\n      //   paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      //   if (Number(currentPage) === newBtnNumber) {\n      //     currentItemLi = document.querySelector('.pagination__item--active');\n      //     if (currentItemLi) {\n      //       currentItemLi.classList.remove('pagination__item--active');\n      //     }\n\n      // paginationListEl\n      //   .querySelector(liClass)\n      //   .classList.add('pagination__item--active');\n    }\n    paginationArrBtn.push('...');\n    paginationArrAtr.push(currentPage + 3);\n    paginationArrBtn.push(totalPages);\n    paginationArrAtr.push(totalPages);\n  }\n  // paginationListEl.querySelector('.item2').textContent = '...';\n  // paginationListEl.querySelector('.item8').textContent = '...';\n  // paginationBtnHidden(page, paginationListEl, totalPage);\n  //   }\n  // ---- 3 Ver\n  if (currentPage >= totalPages - 5) {\n    paginationArrBtn.push(1);\n    paginationArrAtr.push(1);\n    paginationArrBtn.push('...');\n    paginationArrAtr.push(totalPages - 7);\n    for (let i = -6; i <= 0; i++) {\n      //   newBtnNumber = totalPage + i;\n      //   liClass = `.item${i + 9}`;\n      paginationArrBtn.push(totalPages + i);\n      paginationArrAtr.push(totalPages + i);\n      //   paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n\n      //   paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      //   if (Number(currentPage) === newBtnNumber) {\n      //     currentItemLi = document.querySelector('.pagination__item--active');\n      //     if (currentItemLi) {\n      //       currentItemLi.classList.remove('pagination__item--active');\n      //     }\n\n      //     paginationListEl\n      //       .querySelector(liClass)\n      //       .classList.add('pagination__item--active');\n      //   }\n      //   paginationListEl.querySelector('.item2').textContent = '...';\n      //   paginationBtnHidden(page, paginationListEl, totalPage);\n      // }\n    }\n  }\n\n  paginationArrBtn.forEach(pageNumber => {\n    let itemClass = paginationArrBtn.indexOf(pageNumber) + 1;\n    let activeClass =\n      pageNumber === currentPage ? 'pagination__item--active' : '';\n\n    paginationLinks =\n      paginationLinks +\n      `<li class=\"pagination__item item${itemClass}\"><a data-page=\"${\n        paginationArrAtr[itemClass - 1]\n      }\" href=\"${buildUrl(\n        paginationArrAtr[itemClass - 1],\n        mediaType,\n        time_window\n      )}\" class=\"link pagination__link ${activeClass} \">${pageNumber}</a></li>`;\n  });\n  return `<button class=\"btn--decrement\" data-page=\"${\n    currentPage - 1\n  }\" type=\"button\" >\n    <svg data-page=\"${\n      currentPage - 1\n    }\" class=\"pagination__icon\"  width=\"16\" height=\"16\">\n     <use href=\"./images/icons.svg#icon-arrow-left\"></use>\n    </svg>\n  </button>\n        <div class=\"pagination__wrap\">\n        <ul class=\"pagination__list\">\n        ${paginationLinks} </ul>\n        </div>\n        \n        <button class=\"btn--increment\" data-page=\"${\n          currentPage + 1\n        }\" type=\"button\" >\n    <svg class=\"pagination__icon\" data-page=\"${\n      currentPage + 1\n    } \"width=\"16\" height=\"16\">\n      <use href=\"./images/icons.svg#icon-arrow-right\"></use>\n    </svg>\n  </button>`;\n}\n\n//------------------------------------\nfunction onPaginationLiElClick(evt) {\n  currentItemLi = document.querySelector('.pagination__item--active');\n  if (currentItemLi) {\n    currentItemLi.classList.remove('pagination__item--active');\n  }\n  cleanRender(refs.galleryEl);\n\n  page = evt.target.innerText;\n  if (evt.target.innerText === '...') {\n    if (evt.target.classList.contains('item8')) {\n      page = Number(evt.target.previousSibling.innerText) + 1;\n    }\n    if (evt.target.classList.contains('item2')) {\n      page = Number(evt.target.nextSibling.innerText) - 1;\n    }\n  }\n  currentPage = page;\n\n  fetchFilmsTrends(page, urlPart).then(data => {\n    const destinationEl = refs.galleryEl;\n    filmsTrendRender(data, destinationEl);\n\n    displayPagination(data.total_pages, page, currentPage);\n  });\n}\n//---------------------------------\n\n//data-action=\"increment\"\n","import fetchGenreId from './customFunction/fetchGenreId';\nimport { fetchFilmsTrends } from './customFunction/fetchFilmsTrends'; //Q\nimport { paginationRender } from './customFunction/pagination';\nimport { filmsTrendRender } from './customFunction/filmsTrendRender';\nimport { fetchFilms } from './customFunction/fetchFilmsTrends';\nimport '../css/index.css';\nimport { cleanRender } from './customFunction/functionCleanRender';\n//ost\nexport const urlPart = 'movie/week';\nexport let genreIdArr = []; //не трогать\n\nfetchGenreId()\n  .then(genreId => {\n    genreIdArr = genreId.genres;\n  })\n  .catch(error => console.log(error));\n\n// -----------------\n\nexport const refs = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.films-gallery'),\n  paginationEl: document.querySelector('.pagination'),\n  paginationWrapEl: document.querySelector('.pagination__wrap'),\n  decrementBtnEl: document.querySelector(`button[data-action=\"decrement\"]`),\n  incrementBtnEl: document.querySelector(`button[data-action=\"increment\"]`),\n}; //******\n\n// let paginationLiElArr;\nlet paginationListEl; //**** */\n// let paginationLiEl;\n// let currentPageLiEl;\n// let liArr;\nlet currentItemLi; //**** */\nlet newBtnNumber; //**** */\nlet liClass; //***** */\nlet page = 1;\n\nfunction fetchMovies(page) {\n  fetchFilms(page, 'movie', 'week').then(data => {\n    const destinationEl = refs.galleryEl;\n\n    filmsTrendRender(data, destinationEl);\n    let totalPage = data.total_pages;\n\n    if (totalPage > 1) {\n      const renderedPagination = paginationRender(\n        Number(data.total_pages),\n        Number(data.page),\n        'movie',\n        'week'\n      );\n      refs.paginationEl.innerHTML = renderedPagination;\n    }\n  });\n}\n\nrefs.paginationEl.addEventListener('click', e => {\n  e.preventDefault();\n  cleanRender(refs.galleryEl);\n  fetchMovies(e.target.dataset.page);\n});\n\n// function onIncrDecrBtnElClick(evt) {\n//   cleanRender(refs.galleryEl);\n//   if (evt.currentTarget.dataset.action === 'increment') {\n//     page = Number(page) + 1;\n//   }\n//   if (evt.currentTarget.dataset.action === 'decrement') {\n//     page = Number(page) - 1;\n//   }\n//   currentPage = page;\n//   fetchFilmsTrends(page, urlPart).then(data => {\n//     const destinationEl = refs.galleryEl;\n//     filmsTrendRender(data, destinationEl);\n\n//     displayPagination(data.total_pages, page, currentPage);\n//   });\n// }\nfetchMovies(page);\n","export default function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n"],"names":["$07cde618e821f576$export$b5cd97dee32de81d","pageNumber","mediaType","time_window","console","log","$07cde618e821f576$export$651946d2de0aa03","page","fetch","then","response","ok","Error","status","json","$b14aa94820aa8763$export$82c99e68956acb60","element","innerHTML","$1b9d373c02079e34$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","$1f0dc3b9307be026$export$88c94c87660d44ec","find","genre","id","name","$4d8632d8d0ee94aa$export$34f980816dd5ca83","arrFilms","map","original_title","release_date","poster_path","genres","length","slice","join","Date","getFullYear","$c5d88112bd4cf304$export$e034e57e3a7a732f","data","destinationEl","imgMarkUp","results","insertAdjacentHTML","$c9fda1e6ab6247cb$export$5fcd9471792c11c9","totalPages","currentPage","paginationArrBtn","paginationArrAtr","paginationLinks","i","itemClass","indexOf","activeClass","genreId","catch","error","$1f0dc3b9307be026$export$21666b427502ea6d","formEl","document","querySelector","galleryEl","paginationEl","paginationWrapEl","decrementBtnEl","incrementBtnEl","$1f0dc3b9307be026$var$fetchMovies","page1","total_pages","renderedPagination","Number","addEventListener","e","preventDefault","target","dataset"],"version":3,"file":"index.076cc5b3.js.map"}