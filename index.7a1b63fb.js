function e(e,t){return fetch(`https://api.themoviedb.org/3/trending/${t}?api_key=894ef72300682f1db325dae2afe3e7e2&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}function t(e,t,n){e<6&&t.classList.add("item--hidden-mob--1"),e>=6&&e<=n-5&&t.classList.add("item--hidden-mob--2"),e>n-5&&t.classList.add("item--hidden-mob--3")}function n(e){e.innerHTML=""}function i(e){let t=[];return e.forEach((e=>{t.push(m.find((t=>t.id===e)).name)})),t}function a(e){return e.map((({original_title:e,release_date:t,genre_ids:n,poster_path:a})=>{let r=i(n);r.length>2&&(r=r.slice(0,2),r.push("Other")),r=r.join(", ");return`<div class="film-card">\n      <div class="film-card__img-box">\n        <a class="film-card__link link" href="">\n        <img class="film-card__img"\n          src="https://www.themoviedb.org/t/p/w500/${a}"\n          alt=""\n        />\n        </a></div>\n      \n        <div class="film-card__info">\n          <h2 class="film-card__name film-card__item">\n            ${e}\n          </h2>\n          <p class="film-card__data film-card__item">\n            ${r} | ${new Date(t).getFullYear()}\n          </p>\n        </div>\n      \n    </div>`})).join("")}function r(e,t){const n=a(e.results);t.insertAdjacentHTML("beforeend",n)}function l(e,n,i){g.incrementBtnEl.addEventListener("click",s),g.decrementBtnEl.addEventListener("click",s),g.paginationWrapEl.innerHTML='<ul class="pagination__list list"></ul>',paginationListEl=document.querySelector(".pagination__list"),paginationListEl.addEventListener("click",o);for(let e=1;e<=9;e++){const t=`item${e}`,a=document.createElement("li");a.classList.add("pagination__item"),a.classList.add(t),a.innerText=n,paginationListEl.appendChild(a),Number(i)===e&&a.classList.add("pagination__item--active")}if(paginationListEl.firstChild.textContent="1",paginationListEl.lastChild.textContent=e,n<=6){for(let e=2;e<=7;e++){const t=`.item${e}`;paginationListEl.querySelector(t).textContent=e}paginationListEl.querySelector(".item8").textContent="...",t(n,paginationListEl,e)}if(n>6&&n<e-5){for(let e=-2;e<=2;e++)newBtnNumber=Number(i)+e,liClass=`.item${e+5}`,paginationListEl.querySelector(liClass).textContent=newBtnNumber,Number(i)===newBtnNumber&&(currentItemLi=document.querySelector(".pagination__item--active"),currentItemLi&&currentItemLi.classList.remove("pagination__item--active"),paginationListEl.querySelector(liClass).classList.add("pagination__item--active"));paginationListEl.querySelector(".item2").textContent="...",paginationListEl.querySelector(".item8").textContent="...",t(n,paginationListEl,e)}if(n>=e-5)for(let a=-6;a<=0;a++)newBtnNumber=e+a,liClass=`.item${a+9}`,paginationListEl.querySelector(liClass).textContent=newBtnNumber,paginationListEl.querySelector(liClass).textContent=newBtnNumber,Number(i)===newBtnNumber&&(currentItemLi=document.querySelector(".pagination__item--active"),currentItemLi&&currentItemLi.classList.remove("pagination__item--active"),paginationListEl.querySelector(liClass).classList.add("pagination__item--active")),paginationListEl.querySelector(".item2").textContent="...",t(n,paginationListEl,e)}function o(t){currentItemLi=document.querySelector(".pagination__item--active"),currentItemLi&&currentItemLi.classList.remove("pagination__item--active"),n(g.galleryEl),page=t.target.innerText,"..."===t.target.innerText&&(t.target.classList.contains("item8")&&(page=Number(t.target.previousSibling.innerText)+1),t.target.classList.contains("item2")&&(page=Number(t.target.nextSibling.innerText)-1)),currentPage=page,e(page,c).then((e=>{r(e,g.galleryEl),l(e.total_pages,page,currentPage)}))}function s(t){n(g.galleryEl),"increment"===t.currentTarget.dataset.action&&(page=Number(page)+1),"decrement"===t.currentTarget.dataset.action&&(page=Number(page)-1),currentPage=page,e(page,c).then((e=>{r(e,g.galleryEl),l(e.total_pages,page,currentPage)}))}const c="movie/week";let m=[];fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).then((e=>{m=e.genres})).catch((e=>console.log(e)));const g={formEl:document.querySelector(".search-form"),galleryEl:document.querySelector(".films-gallery"),paginationEl:document.querySelector(".pagination"),paginationWrapEl:document.querySelector(".pagination__wrap"),decrementBtnEl:document.querySelector('button[data-action="decrement"]'),incrementBtnEl:document.querySelector('button[data-action="increment"]')};e(1,c).then((e=>{r(e,g.galleryEl);e.total_pages>1&&(console.log("in index 2"),l(e.total_pages,1,1))}));
//# sourceMappingURL=index.7a1b63fb.js.map
