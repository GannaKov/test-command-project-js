{"mappings":"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","sources":["src/customFunction/funcrionRender.js","src/customFunction/functionCleanRender.js","src/customFunction/fetchFilmsTrends.js","src/index.js","src/customFunction/fetchGenreId.js"],"sourcesContent":["import getGenreName from '../index.js';\nexport default function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path }) => {\n      let genres = getGenreName(genre_ids);\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n","export default function cleanRender(element) {\n  element.innerHTML = '';\n}\n","// import axios from 'axios';\nconst BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport default function fetchFilmsTrends(page) {\n  return fetch(`${BASEURL}movie/week?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n//https://api.themoviedb.org/3/trending/movie/week?api_key=894ef72300682f1db325dae2afe3e7e2&page=2\n//export default async function\n//const response = await axios.get(\n","// import { Notify } from 'notiflix';\n// import { Report } from 'notiflix';\n// import 'notiflix/dist/notiflix-3.2.5.min.css';\n\nimport createFilmMarkup from './customFunction/funcrionRender';\nimport cleanRender from './customFunction/functionCleanRender';\nimport fetchGenreId from './customFunction/fetchGenreId';\nimport fetchFilmsTrends from './customFunction/fetchFilmsTrends';\n\n// import './css/styles.css';\nimport '../css/index.css';\n\nlet genreIdArr = [];\n\nfetchGenreId()\n  .then(genreId => {\n    console.log('FFF', genreId);\n    genreIdArr = genreId.genres;\n  })\n  .catch(error => console.log(error));\n\n// -----------------\n\nlet page = 1;\nlet totalPage; //**** */\n\nlet currentPage = 1;\n// let totalHitsPhotos;\n// let inputValue = '';\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.films-gallery'),\n  paginationEl: document.querySelector('.pagination'),\n  paginationWrapEl: document.querySelector('.pagination__wrap'),\n  decrementBtnEl: document.querySelector(`button[data-action=\"decrement\"]`),\n  incrementBtnEl: document.querySelector(`button[data-action=\"increment\"]`),\n}; //******\n\n// let paginationLiElArr;\nlet paginationListEl; //**** */\n// let paginationLiEl;\n// let currentPageLiEl;\n// let liArr;\nlet currentItemLi; //**** */\nlet newBtnNumber; //**** */\nlet liClass; //***** */\n//---- создает 1 страницу трендов\nfetchFilmsTrends(page).then(response => {\n  const imgMarkUp = createFilmMarkup(response.results);\n  refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n  console.log(response);\n  console.log(response.results);\n  totalPage = response.total_pages;\n  if (totalPage > 1) {\n    displayPagination(response.results);\n  }\n});\n//---------------------\n\n// --- жанры\nexport default function getGenreName(genre_ids) {\n  let genreName = [];\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n  return genreName;\n}\n//-------------------\n//----- Pagination -----\nfunction displayPagination(arrFilms) {\n  refs.incrementBtnEl.addEventListener('click', onIncrementBtnElClick);\n  refs.decrementBtnEl.addEventListener('click', onDecrementBtnElClick);\n\n  console.log('i', currentPage);\n  refs.paginationWrapEl.innerHTML = '<ul class=\"pagination__list list\"></ul>';\n  paginationListEl = document.querySelector('.pagination__list');\n  paginationListEl.addEventListener('click', onPaginationLiElClick);\n  for (let i = 1; i <= 9; i++) {\n    const classEl = `item${i}`;\n    const liEl = document.createElement('li');\n    liEl.classList.add('pagination__item');\n    liEl.classList.add(classEl);\n    liEl.innerText = page;\n    paginationListEl.appendChild(liEl);\n    if (Number(currentPage) === i) {\n      liEl.classList.add('pagination__item--active');\n    }\n  }\n  paginationListEl.firstChild.textContent = '1';\n\n  paginationListEl.lastChild.textContent = totalPage;\n  // ----- 1 Ver\n  if (page <= 6) {\n    for (let i = 2; i <= 7; i++) {\n      const pageClass = `.item${i}`;\n      paginationListEl.querySelector(pageClass).textContent = i;\n    }\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationBtnHidden();\n    //paginationListEl.classList.add('item--hidden-mob--1'); //!!!!!!!\n\n    // paginationListEl.querySelector('.item6').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item7').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item8').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item9').classList.add('item--hidden-mob');\n  }\n  // --- 2 Ver\n  if (page > 6 && page < totalPage - 5) {\n    for (let i = -2; i <= +2; i++) {\n      newBtnNumber = Number(currentPage) + i;\n      liClass = `.item${i + 5}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          console.log('ja 2');\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n    }\n    paginationListEl.querySelector('.item2').textContent = '...';\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationBtnHidden();\n    //paginationListEl.classList.add('item--hidden-mob--2'); //!!!!!!!\n    // paginationListEl.querySelector('.item8').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item9').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item1').classList.add('item--hidden-mob');\n    // paginationListEl.querySelector('.item2').classList.add('item--hidden-mob');\n  }\n  // ---- 3 Ver\n  if (page >= totalPage - 5) {\n    for (let i = -6; i <= 0; i++) {\n      newBtnNumber = totalPage + i;\n      liClass = `.item${i + 9}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          console.log('ja 2');\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n      paginationListEl.querySelector('.item2').textContent = '...';\n      paginationBtnHidden();\n      // paginationListEl.classList.add('item--hidden-mob--3'); //!!!!!!\n      // paginationListEl\n      //   .querySelector('.item1')\n      //   .classList.add('item--hidden-mob');\n      // paginationListEl\n      //   .querySelector('.item2')\n      //   .classList.add('item--hidden-mob');\n      // paginationListEl\n      //   .querySelector('.item3')\n      //   .classList.add('item--hidden-mob');\n      // paginationListEl\n      //   .querySelector('.item4')\n      //   .classList.add('item--hidden-mob');\n    }\n  }\n}\n\nfunction onPaginationLiElClick(evt) {\n  currentItemLi = document.querySelector('.pagination__item--active');\n  if (currentItemLi) {\n    currentItemLi.classList.remove('pagination__item--active');\n  }\n  cleanRender(refs.galleryEl);\n\n  page = evt.target.innerText;\n  if (evt.target.innerText === '...') {\n    if (evt.target.classList.contains('item8')) {\n      page = Number(evt.target.previousSibling.innerText) + 1;\n    }\n    if (evt.target.classList.contains('item2')) {\n      page = Number(evt.target.nextSibling.innerText) - 1;\n      console.log(page);\n    }\n  }\n  currentPage = page;\n\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n\n    displayPagination(response.results);\n    // displayPaginationActiveBtn(page); //targetPage\n  });\n}\n//------------------------------------\nfunction paginationBtnHidden() {\n  if (page < 6) {\n    paginationListEl.classList.add('item--hidden-mob--1');\n  }\n  if (page >= 6 && page <= totalPage - 5) {\n    paginationListEl.classList.add('item--hidden-mob--2');\n  }\n  if (page > totalPage - 5) {\n    paginationListEl.classList.add('item--hidden-mob--3');\n  }\n}\n//------------------------\nfunction onIncrementBtnElClick() {\n  cleanRender(refs.galleryEl);\n  page = Number(page) + 1;\n  currentPage = page;\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n    displayPagination(response.results);\n  });\n}\nfunction onDecrementBtnElClick() {\n  cleanRender(refs.galleryEl);\n  page = Number(page) - 1;\n  currentPage = page;\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n\n    displayPagination(response.results);\n  });\n}\n","export default function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n"],"names":["$9d2e31b2683281eb$export$2e2bcd8739ae039","arrFilms","map","original_title","release_date","genre_ids","poster_path","$1f0dc3b9307be026$export$2e2bcd8739ae039","Date","getFullYear","join","$b14aa94820aa8763$export$2e2bcd8739ae039","element","innerHTML","$07cde618e821f576$export$2e2bcd8739ae039","page","fetch","then","response","ok","Error","status","json","$1f0dc3b9307be026$var$genreIdArr","genreId","console","log","genres","catch","error","$1f0dc3b9307be026$var$totalPage","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$refs","formEl","document","querySelector","galleryEl","paginationEl","paginationWrapEl","decrementBtnEl","incrementBtnEl","$1f0dc3b9307be026$var$paginationListEl","$1f0dc3b9307be026$var$currentItemLi","$1f0dc3b9307be026$var$newBtnNumber","$1f0dc3b9307be026$var$liClass","genreName","forEach","genre_id","push","find","genre","id","name","$1f0dc3b9307be026$var$displayPagination","addEventListener","$1f0dc3b9307be026$var$onIncrementBtnElClick","$1f0dc3b9307be026$var$onDecrementBtnElClick","$1f0dc3b9307be026$var$onPaginationLiElClick","i","classEl","liEl","createElement","classList","add","innerText","appendChild","Number","firstChild","textContent","lastChild","pageClass","$1f0dc3b9307be026$var$paginationBtnHidden","remove","i1","evt","target","contains","previousSibling","nextSibling","imgMarkUp","results","insertAdjacentHTML","total_pages"],"version":3,"file":"index.7130e72b.js.map"}