{"mappings":"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","sources":["src/customFunction/fetchFilmsTrends.js","src/customFunction/paginationBtnHidden.js","src/customFunction/functionCleanRender.js","src/customFunction/getGenreName.js","src/customFunction/trendfilmsMarkup.js","src/customFunction/filmsTrendRender.js","src/customFunction/pagination.js","src/index.js","src/customFunction/fetchGenreId.js"],"sourcesContent":["//import {displayPagination}//!!!!\n\nconst BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function fetchFilmsTrends(page, urlPart) {\n  return fetch(`${BASEURL}${urlPart}?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n//https://api.themoviedb.org/3/trending/movie/week?api_key=894ef72300682f1db325dae2afe3e7e2&page=2\n//export default async function\n//const response = await axios.get(\n","export function paginationBtnHidden(page, paginationListEl, totalPage) {\n  if (page < 6) {\n    paginationListEl.classList.add('item--hidden-mob--1');\n  }\n  if (page >= 6 && page <= totalPage - 5) {\n    paginationListEl.classList.add('item--hidden-mob--2');\n  }\n  if (page > totalPage - 5) {\n    paginationListEl.classList.add('item--hidden-mob--3');\n  }\n}\n","export function cleanRender(element) {\n  element.innerHTML = '';\n}\n","// import { genreIdArr } from '../controls/trendsControl';\nimport { genreIdArr } from '../../src/index';\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  // if (genreName.length > 2) {\n  //   genreName = genreName.slice(0, 2);\n  //   genreName.push('Other');\n  // }\n  return genreName;\n}\n","import { getGenreName } from './getGenreName';\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path }) => {\n      let genres = getGenreName(genre_ids);\n\n      if (genres.length > 2) {\n        genres = genres.slice(0, 2);\n        genres.push('Other');\n      }\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n","import { createFilmMarkup } from './trendfilmsMarkup';\n\nexport function filmsTrendRender(data, destinationEl) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  destinationEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n","import { paginationBtnHidden } from './paginationBtnHidden';\nimport { cleanRender } from './functionCleanRender';\nimport { refs } from '../../src/index';\nimport { fetchFilmsTrends } from './fetchFilmsTrends';\nimport { urlPart } from '../../src/index';\nimport { filmsTrendRender } from './filmsTrendRender';\n//import { page } from '../../src/index';\n\nexport function displayPagination(totalPage, page, currentPage) {\n  //console.log(arrFilms);\n  refs.incrementBtnEl.addEventListener('click', onIncrDecrBtnElClick);\n  refs.decrementBtnEl.addEventListener('click', onIncrDecrBtnElClick);\n  refs.paginationWrapEl.innerHTML = '<ul class=\"pagination__list list\"></ul>';\n  paginationListEl = document.querySelector('.pagination__list');\n  paginationListEl.addEventListener('click', onPaginationLiElClick);\n  for (let i = 1; i <= 9; i++) {\n    const classEl = `item${i}`;\n    const liEl = document.createElement('li');\n    liEl.classList.add('pagination__item');\n    liEl.classList.add(classEl);\n    liEl.innerText = page;\n\n    paginationListEl.appendChild(liEl);\n    if (Number(currentPage) === i) {\n      liEl.classList.add('pagination__item--active');\n    }\n  }\n  paginationListEl.firstChild.textContent = '1';\n\n  paginationListEl.lastChild.textContent = totalPage;\n  // ----- 1 Ver\n  if (page <= 6) {\n    for (let i = 2; i <= 7; i++) {\n      const pageClass = `.item${i}`;\n      paginationListEl.querySelector(pageClass).textContent = i;\n    }\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationBtnHidden(page, paginationListEl, totalPage);\n  }\n  // --- 2 Ver\n  if (page > 6 && page < totalPage - 5) {\n    for (let i = -2; i <= +2; i++) {\n      newBtnNumber = Number(currentPage) + i;\n      liClass = `.item${i + 5}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n    }\n    paginationListEl.querySelector('.item2').textContent = '...';\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationBtnHidden(page, paginationListEl, totalPage);\n  }\n  // ---- 3 Ver\n  if (page >= totalPage - 5) {\n    for (let i = -6; i <= 0; i++) {\n      newBtnNumber = totalPage + i;\n      liClass = `.item${i + 9}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n      paginationListEl.querySelector('.item2').textContent = '...';\n      paginationBtnHidden(page, paginationListEl, totalPage);\n    }\n  }\n}\n//------------------------------------\nfunction onPaginationLiElClick(evt) {\n  currentItemLi = document.querySelector('.pagination__item--active');\n  if (currentItemLi) {\n    currentItemLi.classList.remove('pagination__item--active');\n  }\n  cleanRender(refs.galleryEl);\n\n  page = evt.target.innerText;\n  if (evt.target.innerText === '...') {\n    if (evt.target.classList.contains('item8')) {\n      page = Number(evt.target.previousSibling.innerText) + 1;\n    }\n    if (evt.target.classList.contains('item2')) {\n      page = Number(evt.target.nextSibling.innerText) - 1;\n    }\n  }\n  currentPage = page;\n\n  fetchFilmsTrends(page, urlPart).then(data => {\n    const destinationEl = refs.galleryEl;\n    filmsTrendRender(data, destinationEl);\n\n    displayPagination(data.total_pages, page, currentPage);\n  });\n}\n//---------------------------------\nfunction onIncrDecrBtnElClick(evt) {\n  cleanRender(refs.galleryEl);\n  if (evt.currentTarget.dataset.action === 'increment') {\n    page = Number(page) + 1;\n  }\n  if (evt.currentTarget.dataset.action === 'decrement') {\n    page = Number(page) - 1;\n  }\n  currentPage = page;\n  fetchFilmsTrends(page, urlPart).then(data => {\n    const destinationEl = refs.galleryEl;\n    filmsTrendRender(data, destinationEl);\n\n    displayPagination(data.total_pages, page, currentPage);\n  });\n}\n","import fetchGenreId from './customFunction/fetchGenreId';\nimport { fetchFilmsTrends } from './customFunction/fetchFilmsTrends'; //Q\nimport { displayPagination } from './customFunction/pagination';\nimport { filmsTrendRender } from './customFunction/filmsTrendRender';\n\nimport '../css/index.css';\nlet page = 1; //ost\nexport const urlPart = 'movie/week';\nexport let genreIdArr = []; //не трогать\n\nfetchGenreId()\n  .then(genreId => {\n    genreIdArr = genreId.genres;\n  })\n  .catch(error => console.log(error));\n\n// -----------------\n\n//let totalPage; //**** */\n\n// let currentPage = 1;\n\n//const galleryEl = document.querySelector('.films-gallery');\nexport const refs = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.films-gallery'),\n  paginationEl: document.querySelector('.pagination'),\n  paginationWrapEl: document.querySelector('.pagination__wrap'),\n  decrementBtnEl: document.querySelector(`button[data-action=\"decrement\"]`),\n  incrementBtnEl: document.querySelector(`button[data-action=\"increment\"]`),\n}; //******\n\n// let paginationLiElArr;\nlet paginationListEl; //**** */\n// let paginationLiEl;\n// let currentPageLiEl;\n// let liArr;\nlet currentItemLi; //**** */\nlet newBtnNumber; //**** */\nlet liClass; //***** */\n\n//---- создает 1 страницу трендов\nfetchFilmsTrends(page, urlPart).then(data => {\n  const destinationEl = refs.galleryEl;\n  filmsTrendRender(data, destinationEl);\n  let totalPage = data.total_pages;\n  let currentPage = 1;\n  if (totalPage > 1) {\n    console.log('in index 2');\n    displayPagination(data.total_pages, page, currentPage);\n  }\n});\n\n//----- Pagination -----\n\n//------------------------------------\n\n//------------------------\n","export default function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n"],"names":["$07cde618e821f576$export$25311eb0e0625687","page","urlPart","fetch","then","response","ok","Error","status","json","$9c5d8ba517f6ca56$export$ff7cf5e0f415b90e","paginationListEl","totalPage","classList","add","$b14aa94820aa8763$export$82c99e68956acb60","element","innerHTML","$1b9d373c02079e34$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","$1f0dc3b9307be026$export$88c94c87660d44ec","find","genre","id","name","$4d8632d8d0ee94aa$export$34f980816dd5ca83","arrFilms","map","original_title","release_date","poster_path","genres","length","slice","join","Date","getFullYear","$c5d88112bd4cf304$export$e034e57e3a7a732f","data","destinationEl","imgMarkUp","results","insertAdjacentHTML","$c9fda1e6ab6247cb$export$887698316ae08cd6","currentPage","$1f0dc3b9307be026$export$21666b427502ea6d","incrementBtnEl","addEventListener","$c9fda1e6ab6247cb$var$onIncrDecrBtnElClick","decrementBtnEl","paginationWrapEl","document","querySelector","$c9fda1e6ab6247cb$var$onPaginationLiElClick","i","classEl","liEl","createElement","innerText","appendChild","Number","firstChild","textContent","lastChild","pageClass","newBtnNumber","liClass","currentItemLi","remove","i1","evt","galleryEl","target","contains","previousSibling","nextSibling","$1f0dc3b9307be026$export$14099b9669f94b27","total_pages","currentTarget","dataset","action","genreId","catch","error","console","log","formEl","paginationEl"],"version":3,"file":"index.7a1b63fb.js.map"}