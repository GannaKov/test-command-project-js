{"mappings":"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","sources":["src/customFunction/funcrionRender.js","src/customFunction/functionCleanRender.js","src/customFunction/fetchFilmsTrends.js","src/index.js","src/customFunction/fetchGenreId.js"],"sourcesContent":["import getGenreName from '../index.js';\nexport default function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path }) => {\n      let genres = getGenreName(genre_ids);\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n// `<div class=\"photo-card\">\n//         <a class=\"gallery__link link\" href=\"${largeImageURL}\">\n//     <img src=\"${webformatURL}\" alt=\"${tags} loading=\"lazy\" /></a>\n//     <div class=\"info\">\n//       <p class=\"info-item\">\n//         <b>Likes ${likes}</b>\n//       </p>\n//       <p class=\"info-item\">\n//         <b>Views ${views}</b>\n//       </p>\n//       <p class=\"info-item\">\n//         <b>Comments ${comments}</b>\n//       </p>\n//       <p class=\"info-item\">\n//         <b>Downloads ${downloads}</b>\n//       </p>\n//     </div>\n//   </div>\n//   `;\n","export default function cleanRender(element) {\n  element.innerHTML = '';\n}\n","// import axios from 'axios';\nconst BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport default function fetchFilmsTrends(page) {\n  return fetch(`${BASEURL}movie/week?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n//https://api.themoviedb.org/3/trending/movie/week?api_key=894ef72300682f1db325dae2afe3e7e2&page=2\n//export default async function\n//const response = await axios.get(\n","// import { Notify } from 'notiflix';\n// import { Report } from 'notiflix';\n// import 'notiflix/dist/notiflix-3.2.5.min.css';\n\nimport createFilmMarkup from './customFunction/funcrionRender';\nimport cleanRender from './customFunction/functionCleanRender';\nimport fetchGenreId from './customFunction/fetchGenreId';\nimport fetchFilmsTrends from './customFunction/fetchFilmsTrends';\n\n// import './css/styles.css';\nimport '../css/index.css';\n\nlet genreIdArr = [];\n\nfetchGenreId()\n  .then(genreId => {\n    genreIdArr = genreId.genres;\n  })\n  .catch(error => console.log(error));\n\n// -----------------\n\nlet page = 1;\nlet totalPage;\n\nlet currentPage = 1;\nlet totalHitsPhotos;\nlet inputValue = '';\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  galleryEl: document.querySelector('.films-gallery'),\n  paginationEl: document.querySelector('.pagination'),\n  paginationWrapEl: document.querySelector('.pagination__wrap'),\n  decrementBtnEl: document.querySelector(`button[data-action=\"decrement\"]`),\n  incrementBtnEl: document.querySelector(`button[data-action=\"increment\"]`),\n};\n\nlet paginationLiElArr;\nlet paginationListEl;\nlet paginationLiEl;\nlet currentPageLiEl;\nlet liArr;\nlet currentItemLi;\nlet newBtnNumber;\nlet liClass;\n//---- создает 1 страницу трендов\nfetchFilmsTrends(page).then(response => {\n  // getGenreName(response.results);\n  const imgMarkUp = createFilmMarkup(response.results);\n  refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n  console.log(response);\n  totalPage = response.total_pages;\n  if (totalPage > 1) {\n    displayPagination(response.results);\n    // displayPaginationActiveBtn(page);\n    // paginationLiElArr = paginationListEl.querySelectorAll('li');\n    // console.log(paginationListLiElArr);\n    // for (let i = 0; i < 9; i++) {\n    //   paginationLiElArr[i].addEventListener('click', onPaginationLiElClick);\n    // }\n    //currentPageLiEl.addEventListener('click', onPageLiElClick());\n  }\n  // console.log(response.data.results);\n  // console.log(response.data.results.original_name);\n});\n//---------------------\n\n// --- жанры\nexport default function getGenreName(genre_ids) {\n  let genreName = [];\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n  return genreName;\n}\n//-------------------\n//----- Pagination -----\nfunction displayPagination(arrFilms) {\n  refs.incrementBtnEl.addEventListener('click', onIncrementBtnElClick);\n  refs.decrementBtnEl.addEventListener('click', onDecrementBtnElClick);\n\n  console.log('i', currentPage);\n  refs.paginationWrapEl.innerHTML = '<ul class=\"pagination__list list\"></ul>';\n  paginationListEl = document.querySelector('.pagination__list');\n  paginationListEl.addEventListener('click', onPaginationLiElClick);\n  for (let i = 1; i <= 9; i++) {\n    const classEl = `item${i}`;\n    const liEl = document.createElement('li');\n    liEl.classList.add('pagination__item');\n    liEl.classList.add(classEl);\n    liEl.innerText = page;\n    paginationListEl.appendChild(liEl);\n    if (Number(currentPage) === i) {\n      liEl.classList.add('pagination__item--active');\n    }\n  }\n  paginationListEl.firstChild.textContent = '1';\n\n  paginationListEl.lastChild.textContent = totalPage;\n  // ----- 1 Ver\n  if (page <= 6) {\n    for (let i = 2; i <= 7; i++) {\n      const pageClass = `.item${i}`;\n      paginationListEl.querySelector(pageClass).textContent = i;\n    }\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationListEl.querySelector('.item6').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item7').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item8').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item9').classList.add('item--hidden-mob');\n  }\n  // --- 2 Ver\n  if (page > 6 && page <= totalPage - 5) {\n    for (let i = -2; i <= +2; i++) {\n      newBtnNumber = Number(currentPage) + i;\n      liClass = `.item${i + 5}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          console.log('ja 2');\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n    }\n    paginationListEl.querySelector('.item2').textContent = '...';\n    paginationListEl.querySelector('.item8').textContent = '...';\n    paginationListEl.querySelector('.item8').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item9').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item1').classList.add('item--hidden-mob');\n    paginationListEl.querySelector('.item2').classList.add('item--hidden-mob');\n  }\n  // ---- 3 Ver\n  if (page >= totalPage - 5) {\n    for (let i = -6; i <= 0; i++) {\n      newBtnNumber = totalPage + i;\n      liClass = `.item${i + 9}`;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n\n      paginationListEl.querySelector(liClass).textContent = newBtnNumber;\n      if (Number(currentPage) === newBtnNumber) {\n        currentItemLi = document.querySelector('.pagination__item--active');\n        if (currentItemLi) {\n          console.log('ja 2');\n          currentItemLi.classList.remove('pagination__item--active');\n        }\n\n        paginationListEl\n          .querySelector(liClass)\n          .classList.add('pagination__item--active');\n      }\n      paginationListEl.querySelector('.item2').textContent = '...';\n      paginationListEl\n        .querySelector('.item1')\n        .classList.add('item--hidden-mob');\n      paginationListEl\n        .querySelector('.item2')\n        .classList.add('item--hidden-mob');\n      paginationListEl\n        .querySelector('.item3')\n        .classList.add('item--hidden-mob');\n      paginationListEl\n        .querySelector('.item4')\n        .classList.add('item--hidden-mob');\n    }\n  }\n}\n\n// function displayPaginationActiveBtn(page) {\n//   const pageCurrentclass = `.item${page}`;\n//   currentPageLiEl = document.querySelector(pageCurrentclass);\n//   currentPageLiEl.classList.add('pagination__item--active');\n// }\nfunction onPaginationLiElClick(evt) {\n  currentItemLi = document.querySelector('.pagination__item--active');\n  if (currentItemLi) {\n    currentItemLi.classList.remove('pagination__item--active');\n  }\n  cleanRender(refs.galleryEl);\n  // cleanRender(currentPageLiEl);\n  // if (evt.target.classList.contains('item5')) {\n  //   console.log('plus');\n  // }\n\n  page = evt.target.innerText;\n  if (evt.target.innerText === '...') {\n    if (evt.target.classList.contains('item8')) {\n      page = Number(evt.target.previousSibling.innerText) + 1;\n    }\n    if (evt.target.classList.contains('item2')) {\n      page = Number(evt.target.nextSibling.innerText) - 1;\n      console.log(page);\n    }\n  }\n  currentPage = page;\n\n  //targetPage внизу\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n\n    displayPagination(response.results);\n    // displayPaginationActiveBtn(page); //targetPage\n  });\n}\nfunction onIncrementBtnElClick() {\n  cleanRender(refs.galleryEl);\n  page = Number(page) + 1;\n  currentPage = page;\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n    displayPagination(response.results);\n  });\n}\nfunction onDecrementBtnElClick() {\n  cleanRender(refs.galleryEl);\n  page = Number(page) - 1;\n  currentPage = page;\n  fetchFilmsTrends(page).then(response => {\n    const imgMarkUp = createFilmMarkup(response.results);\n    refs.galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n\n    displayPagination(response.results);\n  });\n}\n","export default function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n"],"names":["$6cbab15b41419740$export$2e2bcd8739ae039","arrFilms","map","param","original_title","release_date","genre_ids","poster_path","genres","$b8f9b7833fa37166$export$2e2bcd8739ae039","yearRelease","Date","getFullYear","concat","join","$16681dd921dd6c04$export$2e2bcd8739ae039","element","innerHTML","$c108917dde1ea6b4$export$2e2bcd8739ae039","page","fetch","then","response","ok","Error","status","json","$b8f9b7833fa37166$var$genreIdArr","genreId","catch","error","console","log","$b8f9b7833fa37166$var$totalPage","$b8f9b7833fa37166$var$paginationListEl","$b8f9b7833fa37166$var$currentItemLi","$b8f9b7833fa37166$var$newBtnNumber","$b8f9b7833fa37166$var$liClass","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$currentPage","$b8f9b7833fa37166$var$refs","formEl","document","querySelector","galleryEl","paginationEl","paginationWrapEl","decrementBtnEl","incrementBtnEl","genreName","forEach","genre_id","push","find","genre","id","name","$b8f9b7833fa37166$var$displayPagination","addEventListener","$b8f9b7833fa37166$var$onIncrementBtnElClick","$b8f9b7833fa37166$var$onDecrementBtnElClick","$b8f9b7833fa37166$var$onPaginationLiElClick","i","classEl","liEl","createElement","classList","add","innerText","appendChild","Number","firstChild","textContent","lastChild","i1","pageClass","i2","remove","i3","evt","target","contains","previousSibling","nextSibling","imgMarkUp","results","insertAdjacentHTML","total_pages"],"version":3,"file":"index.ecd14770.js.map"}