!function(){function e(e){return e.map((function(e){var t=e.original_title,n=e.release_date,i=e.genre_ids,r=e.poster_path,a=d(i),o=new Date(n).getFullYear();return'<div class="film-card">\n      <div class="film-card__img-box">\n        <a class="film-card__link link" href="">\n        <img class="film-card__img"\n          src="https://www.themoviedb.org/t/p/w500/'.concat(r,'"\n          alt=""\n        />\n        </a></div>\n      \n        <div class="film-card__info">\n          <h2 class="film-card__name film-card__item">\n            ').concat(t,'\n          </h2>\n          <p class="film-card__data film-card__item">\n            ').concat(a," | ").concat(o,"\n          </p>\n        </div>\n      \n    </div>")})).join("")}function t(e){e.innerHTML=""}function n(e){return fetch("".concat("https://api.themoviedb.org/3/trending/","movie/week?api_key=").concat("894ef72300682f1db325dae2afe3e7e2","&page=").concat(e)).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))}var i=[];fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US").then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(e){i=e.genres})).catch((function(e){return console.log(e)}));var r,a,o,c,l,s=1,u=1,m={formEl:document.querySelector(".search-form"),galleryEl:document.querySelector(".films-gallery"),paginationEl:document.querySelector(".pagination"),paginationWrapEl:document.querySelector(".pagination__wrap"),decrementBtnEl:document.querySelector('button[data-action="decrement"]'),incrementBtnEl:document.querySelector('button[data-action="increment"]')};function d(e){var t=[];return e.forEach((function(e){t.push(i.find((function(t){return t.id===e})).name)})),t}function f(e){m.incrementBtnEl.addEventListener("click",_),m.decrementBtnEl.addEventListener("click",v),console.log("i",u),m.paginationWrapEl.innerHTML='<ul class="pagination__list list"></ul>',(a=document.querySelector(".pagination__list")).addEventListener("click",g);for(var t=1;t<=9;t++){var n="item".concat(t),i=document.createElement("li");i.classList.add("pagination__item"),i.classList.add(n),i.innerText=s,a.appendChild(i),Number(u)===t&&i.classList.add("pagination__item--active")}if(a.firstChild.textContent="1",a.lastChild.textContent=r,s<=6){for(var d=2;d<=7;d++){var f=".item".concat(d);a.querySelector(f).textContent=d}a.querySelector(".item8").textContent="...",a.querySelector(".item8").setAttribute("action","plus")}if(s>6&&s<=r-5){for(var p=-2;p<=2;p++)c=Number(u)+p,l=".item".concat(p+5),a.querySelector(l).textContent=c,Number(u)===c&&((o=document.querySelector(".pagination__item--active"))&&(console.log("ja 2"),o.classList.remove("pagination__item--active")),a.querySelector(l).classList.add("pagination__item--active"));a.querySelector(".item2").textContent="...",a.querySelector(".item8").textContent="..."}if(s>=r-5)for(var y=-6;y<=0;y++)c=r+y,l=".item".concat(y+9),a.querySelector(l).textContent=c,a.querySelector(l).textContent=c,Number(u)===c&&((o=document.querySelector(".pagination__item--active"))&&(console.log("ja 2"),o.classList.remove("pagination__item--active")),a.querySelector(l).classList.add("pagination__item--active")),a.querySelector(".item2").textContent="..."}function g(i){(o=document.querySelector(".pagination__item--active"))&&o.classList.remove("pagination__item--active"),t(m.galleryEl),s=i.target.innerText,"..."===i.target.innerText&&(i.target.classList.contains("item8")&&(s=Number(i.target.previousSibling.innerText)+1),i.target.classList.contains("item2")&&(s=Number(i.target.nextSibling.innerText)-1,console.log(s))),u=s,n(s).then((function(t){var n=e(t.results);m.galleryEl.insertAdjacentHTML("beforeend",n),f(t.results)}))}function _(){t(m.galleryEl),s=Number(s)+1,u=s,n(s).then((function(t){var n=e(t.results);m.galleryEl.insertAdjacentHTML("beforeend",n),f(t.results)}))}function v(){t(m.galleryEl),s=Number(s)-1,u=s,n(s).then((function(t){var n=e(t.results);m.galleryEl.insertAdjacentHTML("beforeend",n),f(t.results)}))}n(s).then((function(t){var n=e(t.results);m.galleryEl.insertAdjacentHTML("beforeend",n),console.log(t),(r=t.total_pages)>1&&f(t.results)}))}();
//# sourceMappingURL=index.251b81b2.js.map
