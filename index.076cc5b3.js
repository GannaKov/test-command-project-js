function e(e,n,t){return console.log(n),`https://api.themoviedb.org/3/trending/${n}/${t}?api_key=894ef72300682f1db325dae2afe3e7e2&page=${e}`}function n(n,t,a){return fetch(e(n,t,a)).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}function t(e){e.innerHTML=""}function a(e){let n=[];return e.forEach((e=>{n.push(o.find((n=>n.id===e)).name)})),n}function i(e){return e.map((({original_title:e,release_date:n,genre_ids:t,poster_path:i})=>{let s=a(t);s.length>2&&(s=s.slice(0,2),s.push("Other")),s=s.join(", ");return`<div class="film-card">\n      <div class="film-card__img-box">\n        <a class="film-card__link link" href="">\n        <img class="film-card__img"\n          src="https://www.themoviedb.org/t/p/w500/${i}"\n          alt=""\n        />\n        </a></div>\n      \n        <div class="film-card__info">\n          <h2 class="film-card__name film-card__item">\n            ${e}\n          </h2>\n          <p class="film-card__data film-card__item">\n            ${s} | ${new Date(n).getFullYear()}\n          </p>\n        </div>\n      \n    </div>`})).join("")}function s(e,n){const t=i(e.results);n.insertAdjacentHTML("beforeend",t)}function r(n,t,a,i){let s=[],r=[],o="";if(t<=6){for(let e=1;e<=7;e++)s.push(e),r.push(e);s.push("..."),r.push(8),s.push(n),r.push(n)}if(t>6&&t<n-5){s.push(1),r.push(1),s.push("..."),r.push(t-3);for(let e=t-2;e<=t+2;e++)s.push(e),r.push(e);s.push("..."),r.push(t+3),s.push(n),r.push(n)}if(t>=n-5){s.push(1),r.push(1),s.push("..."),r.push(n-7);for(let e=-6;e<=0;e++)s.push(n+e),r.push(n+e)}return s.forEach((n=>{let l=s.indexOf(n)+1,c=n===t?"pagination__item--active":"";o+=`<li class="pagination__item item${l}"><a data-page="${r[l-1]}" href="${e(r[l-1],a,i)}" class="link pagination__link ${c} ">${n}</a></li>`})),`<button class="btn--decrement" data-page="${t-1}" type="button" >\n    <svg data-page="${t-1}" class="pagination__icon"  width="16" height="16">\n     <use href="./images/icons.svg#icon-arrow-left"></use>\n    </svg>\n  </button>\n        <div class="pagination__wrap">\n        <ul class="pagination__list">\n        ${o} </ul>\n        </div>\n        \n        <button class="btn--increment" data-page="${t+1}" type="button" >\n    <svg class="pagination__icon" data-page="${t+1} "width="16" height="16">\n      <use href="./images/icons.svg#icon-arrow-right"></use>\n    </svg>\n  </button>`}let o=[];fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).then((e=>{o=e.genres})).catch((e=>console.log(e)));const l={formEl:document.querySelector(".search-form"),galleryEl:document.querySelector(".films-gallery"),paginationEl:document.querySelector(".pagination"),paginationWrapEl:document.querySelector(".pagination__wrap"),decrementBtnEl:document.querySelector('button[data-action="decrement"]'),incrementBtnEl:document.querySelector('button[data-action="increment"]')};function c(e){n(e,"movie","week").then((e=>{if(s(e,l.galleryEl),e.total_pages>1){const n=r(Number(e.total_pages),Number(e.page),"movie","week");l.paginationEl.innerHTML=n}}))}l.paginationEl.addEventListener("click",(e=>{e.preventDefault(),t(l.galleryEl),c(e.target.dataset.page)})),c(1);
//# sourceMappingURL=index.076cc5b3.js.map
